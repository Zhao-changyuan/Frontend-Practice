## 目标

- 能够使用 rem 单位
- 能够使用媒体查询的基本语法
- 能够使用Less的基本语法
- 能够使用 Less 中的嵌套
- 能够使用 Less 中的运算
- 能够使用2种 rem适配方案
- 能够独立完成苏宁移动端首页

**方案？**

1. 页面布局文字能够随着屏幕大小变化而变化？
2. 流式布局和flex布局主要针对宽度布局，那高度如何设置？
3. 怎么样让屏幕发生变化的时候元素高度和宽度等比例缩放？

## 1. rem 基础

rem 单位

rem (root em)是一个相对单位，类似于em，**em是父元素字体大小**。

不同的是**rem的基准是相对于html元素的字体大小**。

比如，根元素 （html）设置font-size: 12px；非根元素设置width: 2rem; 则换成px表示就是24px。

rem 的优点就是可以通过修改html里面的文字大小来改变元素中元素的大小可以整体控制。

## 2. 媒体查询

### 2.1 什么是媒体查询

媒体查询 （Media Query）是CSS3新语法。

- 使用@media查询，可以针对不同的媒体类型定义不同的样式。
- **@media可以针对不同的屏幕尺寸设置不同的样式**
- 当你重置浏览器大小的过程中，页面也会根据浏览器的宽度和高度重新渲染页面
- 目前针对很多苹果手机、Android手机、平板等设备都用的到多媒体查询

### 2.2 语法规范

```CSS
@media mediatype and|not|only (media feature) {
	css-code;
}
```

- 用 @media开头
- mediatype 媒体类型
- 关键字 and not only
- media feature 媒体特性 必须有小括号包含

#### 1. mediatype 查询类型

| 值     | 解释说明                         |
| ------ | -------------------------------- |
| all    | 用于所有设备                     |
| print  | 用于打印机和打印预览             |
| screen | 用于电脑屏幕、平板电脑、手机等。 |

#### 2. 关键字

关键字将媒体类型或多个媒体特性连接到一起作为媒体查询条件

#### 3. 媒体特性

每种媒体类型都具有各自不同的特性，根据不同媒体类型的媒体特性设置不同的展示风格。

| 值        | 说明                               |
| --------- | ---------------------------------- |
| width     | 定义输出设备中页面可见区域的宽度   |
| min-width | 定义处处设备中页面最小可见区域宽度 |
| max-width | 定义输出设备中页面最大可见区域宽度 |

min-width和max-width都是包含等于号的。

注：为了防止混乱，媒体查询我们要按照从小到大或从大到小的顺序来写，但是我们最喜欢的还是从小到大来写，这样代码更简洁。

### 2.3 媒体查询 + rem实现元素动态大小变化

### 2.4 引入资源

当样式比较繁多的时候，我们可以针对不同的媒体使用不同stylesheets（样式表）。

原理：就是直接在link中判断设备的尺寸，然后引入不同的CSS文件。

#### 1. 语法规范

```html
<link rel="stylesheet" media="mediatype and|not|only (media feature)" href="mystylesheet.css">
```

## 3. Less 基础

### 3.1 维护 css 的弊端

- CSS需要书写大量看似没有逻辑的代码，CSS冗余度是比较高的。
- 不方便维护及扩展，不利于复用。
- CSS没有很好的计算能力。
- 非前端开发工程师来讲，往往会因为缺少CSS编写经验而很难写出组织良好且易于维护的CSS代码项目。

### 3.2 Less 介绍

Less（Leaner Style Sheets）是一门CSS扩展语言，也称为CSS预处理器。

它在CSS的语法基础之上引入了变量，Mixin（混入），运算以及函数等功能，大大简化了CSS的编写。

常见CSS预处理器：Sass、 Less、 Stylus

### **3.3 Less使用**

- Less变量
- Less编译
- Less嵌套
- Less运算

### 3.5 Less 变量

我们CSS中的一些颜色和数值等经常使用。语法如下：

`@变量名: 值;`

#### 1. 变量命名规范

- 必须@为前缀
- 不能包含特殊字符
- 不能以数字开头
- 大小写敏感

### 3.6 Less 编译

我们需要把less文件，编译生成为css文件，这样我们的html页面才能使用。

使用vscode插件 Easy LESS

### 3.7 Less 嵌套

1. less 嵌套 子元素的样式直接写到父元素里面就好了
2. 如果遇到（交集|伪类|伪元素选择器）
   1. 内层选择器的前面没有&符号，则它被解析为父选择器的后代；
   2. 如果有&符号，他就被解析为父元素自身或父元素的伪类选择器。

### 3.8 Less 运算

任何数字、颜色或者变量都可以参与运算。就是Less提供了加减乘除算术运算。

**注意：**

- 运算符中间左右有个空格隔开 1px + 5
- 对于两个不同的单位的值之间的运算，运算结果的值取第一个值的单位。
- 如果两个值之间只有一个值有单位，则运算结果就取该单位。
- 除法需用括号括起来，且单位不能写在括号外面。

### 3.9 导出其他less文件

`@import "common";`

## 4. rem适配方案

### 4.1 rem 实际开发适配方案

1. 按照设计稿与设备宽度的比例，动态计算并设置html根标签的font-size大小（媒体查询）
2. CSS中，设计稿元素的宽、高、相对位置等取值，按照同等比例换算为rem为单位的值。

### 4.2 rem 适配方案技术使用（市场主流）

技术方案1：

- less
- 媒体查询
- rem

技术方案2（推荐）：

- flexible.js

- rem

总结：

- 两种方案现在都存在。
- 方案2更简单，先阶段大家无需了解里面的js代码。

### 4.3 rem实际开发适配方案1

rem + 媒体查询 + less技术

#### 1. 设计稿常见尺寸宽度

| 设备         | 常见宽度                                                     |
| ------------ | ------------------------------------------------------------ |
| iphone 4,5   | 640px                                                        |
| iphone 6 7 8 | 750px                                                        |
| Android      | 常见320px 360px 375px 384px 400px 414px 500px 720px大部分4.7~5寸的安卓设备为720px |

一般情况下，我们以一套或两套效果适应大部分的屏幕，放弃极端屏或对其优雅降级，牺牲一些效果。

**现在基本以750为准**。

#### 2. 动态设置Html标签font-size大小

1. 假设设计稿的750px
2. 假设我们把整个屏幕划分为15等份（划分标准不一，可以是20份也可以是10份）
3. 每一份作为html字体大小，这里就是50px
4. 那么在320px设置的时候，字体大小为 320/15就是21.33px
5. 用我们页面元素的大小除以不同的html字体大小会发现他们比例还是相同
6. 比如我们以750为标注设计稿
7. 一个100*100像素的页面在750屏幕下，就是100/50转换为rem，是 2rem * 2rem，比例时1比1
8. 320屏幕下，html字体大小为21.33 则2rem = 42.66px 此时宽和高都是42.66 但是 宽高的比例还是1比1
9. 但是已经能实现不同屏幕下，页面元素盒子等比例缩放的效果。

#### 3. 元素大小取值方法

1. 最后的公式：页面的rem值 = 页面元素（px）/（屏幕宽度 / 划分的份数）
2. 屏幕宽度/划分的份数 就是 html font-size的大小
3. 或者：页面元素的rem值 = 页面元素值（rem）/html font-size字体大小

## 5. 苏宁首页案例制作

方案：我们采取单独制作移动页面方案

技术：布局采取rem适配布局（less + rem + 媒体查询）

设计图：被设计图采用750px设计尺寸



因为我们PC端也可以打开我们苏宁移动端首页，我们默认html字体大小为50px，注意这句话写到最上面。

**固定定位的盒子势必有宽度。**

## 6 rem 适配方案2

### 6.1 简洁高效的rem适配方案flexible.js

手淘团队出的简洁高效的 移动端适配库

我们再也不需要再写不同屏幕的媒体查询了，因为js做了处理

它的原理是把当前设备划分为10等份，但是不同设备下，比例还是一致的。

我们要做的，就是确定好我们当前设备的html文字大小就可以了

比如当前设计稿750px，那么我们只需要html文字大小设置为 75px (750px / 10)就可以了

里面页面元素rem值：页面元素的px值 / 75

剩余的，让flexible.js来计算

### 6.3 VScode px转换 rem插件cssrem