## 6.1 泛型

泛型程序设计是实现可重用组件的一种手段。

### 6.1.1 泛型简介

在大部分情况下，程序中不需要显示地指定类型参数的实际类型。TypeScript编译器能够根据函数调用的实际参数自动第推断类型参数的实际类型。

### 6.1.2 形式类型参数

#### 6.1.2.1 形式类型参数声明

泛型类型参数能够表示绑定到泛型类型或泛型函数调用的某个实际类型。在类声明、接口声明、类型别名声明以及函数声明中都支持定义类型参数。

形式类型参数名通常以大写字母开头。

建议形式类型参数名以大写字母T(Type的首字母)作为前缀。

T U V W X Y Z

#### 6.1.2.2 类型参数默认类型

在声明形式类型参数时，可以为类型参数设置一个默认类型。

`<T = DefaultType>`

类型参数的默认类型也可以应用形式类型参数列表中的其他类型参数，但是只能引用在当前类型参数左侧（前面）定义的类型参数。

#### 6.1.2.3 可选的类型参数

在形式类型参数列表中，必选类型参数不允许出现在可选类型参数之后。

### 6.1.3 实际类型参数

### 6.1.4 泛型约束

#### 6.1.4.1 泛型约束声明

在泛型的形式类型参数上运行定义一个约束条件，它能够限定类型参数的实际类型的最单范围。

对于一个形式类型参数，可以同时定义泛型约束和默认类型，但默认类型必须满足泛型约束。

#### 6.1.4.2 泛型约束引用类型参数

在泛型参数约束中，约束类型运行引用当前形式类型参数列表中的其他类型参数。

#### 6.1.4.3 基约束

本质上，每个烈性参数都有一个基约束（Base Constraint）

- 规则一，如果类型参数T声明了泛型约束，且泛型约束为另一个类型参数U，那么类型参数T的基约束为类型参数U.
- 规则二，如果类型参数T声明了泛型约束，且泛型约束为某一具体类型Type，那么类型参数T的基约束为类型Type。
- 规则三：如果类型参数T没有声明泛型约束，那么类型参数T的基约束为空对象类型字面量“{}”。

#### 6.1.4.4 常见错误

### 6.1.5 泛型函数

泛型函数中的类型参数用来描述不同参数之间以及参数和函数返回值之间的关系。

#### 6.1.5.1 泛型函数定义

#### 6.1.5.2 泛型函数示例

#### 6.1.5.3 泛型函数类型推断

在大部分情况下，TypeScript编译器能够自动推断出泛型类型的实际类型参数。

TypeScript有一个原则，始终将字面量视为字面量类型，只要在必要的时候才会将字面量类型放宽为某种基础类型。

#### 6.1.5.4 泛型函数注意事项

如果一个函数既可以定义为非泛型函数，又可以定义为泛型函数，那么推荐使用非泛型函数的形式。

当泛型函数的类型参数只在函数签名中出现了一次时，该泛型函数是非必要的。

该问题的本质是，泛型函数的类型参数是用来关联对各不同值的类型的。

### 6.1.6 泛型接口

在引用泛型接口时，必须指定实际类型参数，除非类型参数定义了默认类型。

`Array<T>`是TypeScript内置的泛型数组类型。

### 6.1.7 泛型类型别名

若类型列名的定义中带有类型参数，那么它是泛型类型列名。

#### 6.1.7.1 泛型类型别名定义

#### 6.1.7.2 泛型类型别名示例

在引用泛型类型别名表示的类型时，必须指定实际类型参数。

### 6.1.8 泛型类

若类的定义中带有类型参数，那么它是泛型类。

每个声明都会创建两种类型，即类的实例类型和类的构造函数类型。泛型类描述的是类的实例类型。因为类的静态成员是类构造函数类型的一部分，所以泛型类型参数不能用于类的静态成员。