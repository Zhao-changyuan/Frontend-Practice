装饰器：装饰器是一种特殊类型的声明，它能够被附加到类声明，方法，属性或参数上，可以修改类的行为。

通俗地讲装饰器就是一个方法，可以注入到类、方法、属性参数上来扩展类型、属性、方法、参数的功能。

常见的装饰器有：

- 类装饰器
- 属性装饰器
- 方法装饰器
- 参数装饰器

写法：

- 普通装饰器（无法传参）
- 装饰器工厂（可传参）

## 1. 类装饰器

类装饰器在类声明之前被声明（紧靠着类声明）。类装饰器应用于类构造函数，可以用来监视、修改或替换类定义。

列装饰器表达式会在运行时当做函数被调用，类的公主奥函数作为其唯一的参数。如果类装饰器返回一个值，它会使用提供的构造函数来替换类的声明。

```TypeScript
function logClass(clazz: any) {}

@logClass
class HttpClient {}
```



### 1.2 类装饰器：装饰器工厂（可传参）

```TypeScript
function logClass(params: string) {
	return function(clazz: any) {
		console.log(params, clazz)
	}
}

@logClass
...
```

### 1.3 修改类声明

```TypeScript
function logClass(target: any) {
  
  return class extends target {
    apiUrl = '我是修改后的apiUrl'

    getData() {
      this.apiUrl += '......'
      console.log(this.apiUrl)
    }
  }
}
```

## 2. 属性装饰器

属性装饰器表达式会在运行时当做函数被调用，传入下列两个参数：

1. 对于静态成员来说是类的构造函数；对于实例成员是类的原型对象。
2. 成员的名字

## 3. 方法装饰器（用的比较多）

它会被应用到方法的属性描述符上，可以用来监视，修改或者替换方法定义。

方法装饰器会在运行时传入下列3个参数：

1. 对于静态成员来说是类的构造函数，对于实例成员是类的原型对象。
2. 成员的名字，即方法名称
3. 成员的属性描述符，即属性方法的描述符

## 4. 方法参数装饰器

参数装饰器表达式会在运行时当做函数被调用，可以使用参数装饰器为类的原型增加一些元数据，传入下列3个参数：

1. 对于静态成员来说是类的构造函数，对于实例成员是类的原型对象。
2. 方法的名称
3. 参数在函数参数列表中的索引

## 5. 装饰器的执行顺序

- 属性装饰器
- 方法装饰器
- 方法参数装饰器
- 类装饰器

多个同类型装饰器执行顺序是从后到前。