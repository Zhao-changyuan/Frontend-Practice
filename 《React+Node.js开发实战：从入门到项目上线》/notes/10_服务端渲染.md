（Server Side Rendering, SSR），即服务端返回完整的HTML页面和数据，省去浏览器进行大量的异步数据加载和渲染。

## 10.1 服务端渲染简介

   服务端渲染是指浏览器项服务器发送请求，服务器返回处理好的HTML完整文档，浏览器不再需要通过JavaScript进行异步渲染。

### 10.1.3 客户端渲染和服务端渲染的优缺点

其实，早期的Web项目大多都是基于服务端渲染。

服务端缺点：

- 每次页面加载都要向服务器请求完整的页面和资源会增加服务端压力。
- 同时机械能多个页面间的挑战对用户体验并不友好。



客户端渲染的开发模式和速度相比传统的服务端渲染更加高效。

客户端渲染缺点：

- 首屏渲染慢
- SEO能力差



**总结：**

对于需要考虑SEO优化的项目，例如公司和产品网站、信息和新闻类网站，优先考虑服务端渲染（SSR）。除此之外，基本都可以采用客户端渲染，虽然客户端渲染有首屏渲染速度较慢的问题，但是可以通过多种方式进行优化。

## 10.2 React服务端渲染

### 10.2.1 组件

#### 1. 项目初始化

### 10.2.2 同构

#### 1. 引入同构

同构就是同样的React代码在服务端运行一次，再在客户端运行一次，组件在浏览器端挂载完成后React会自动完成事件绑定。

#### 2. 客户端运行React代码

想要客户端执行React代码，只需要将客户端运行的React代码打包成public下引用的JavaScript文件即可。

ReactDOM.hydrate()的作用是当ReactDOM复用ReactDOMServer服务端渲染的内容时尽可能保留其结构，并补充事件绑定等客户端特有内容。

#### 3. 项目持续优化

### 10.2.3 路由

#### 1. 单页面使用路由

客户端使用`<BrowserRouter>`

服务端使用`<StaticRouter>`

#### 2. 多页面使用路由

### 10.2.4 状态

## 10.3 Next.js 服务端渲染

### 10.3.1 Next.js 简介

优点：

- 开箱即用的服务端渲染，包含自动打包编译、热加载；
- 基于文件系统的路由（File-System Routing），提供良好的代码分层结构；
- 自动代码分片（Automatic Code Splitting），不会加载不需要的代码；
- SEO友好，HTML直接输入，对搜索引擎的抓取和理解更有利。

### 10.3.2 Next.js 开发

#### 1. 项目初始化

Next.js框架会根据pages文件夹下的.js文件生成相应路由，自动处理和渲染其中/pages/index.js对应路由/

#### 2. 添加页面链接

Next.js提供了Link组件来实现路由，进行页面间的跳转。

#### 3. 异步请求数据

Next.js还为React组件提供了一个新的特性getInitialProps，用于异步获取数据，并绑定在组件属性中。

## 10.4 SEO——搜索引擎优化

### 10.4.1 React Helmet组件

它是可重用的React组件，用来管理页面的head标签。

### 10.4.2 预渲染

这种提前将完整内容渲染给“蜘蛛”爬取的技术，就称为预渲染。