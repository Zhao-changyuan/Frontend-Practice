如果元素使用了静态定位，那么就说它未被定位。

## 7.1 固定定位

给一个元素设置position: fixed就能将元素放在视口的任意位置。

top、left、right、bottom这四个值还隐式地定义了元素的宽高。

### 7.1.1 用固定定位创建一个模态框

### 7.1.2 控制定位元素的大小

## 7.2 绝对定位

绝对定位不是相对视口，而是相对最近的祖先定位元素。

### 7.2.1 让Close按钮绝对定位

### 7.2.2 定位伪元素

绝对定位是定位类型里的重量级选手。它经常跟JavaScript配合，用户弹出菜单、工具提示以及消息盒子。

## 7.3 相对定位

跟固定或者绝对定位不一样，不能用top、right、bottom和left改变相对定位元素的大小。

更常见的用法是使用position: relative给它里面的绝对定位元素创建一个包含块。

### 7.3.1 创建一个下拉菜单

### 7.3.2 创建一个CSS三角形

## 7.4 层叠上下文和z-index

### 7.4.1 理解渲染过程和层叠顺序

如果元素刚好重叠，后绘制的元素就会出现在先绘制的元素前面。

浏览器会先绘制所有非定位的元素，然后绘制定位元素。默认情况下，所有的定位元素会出现在非定位元素前面。

通常情况下，模态框要放在网页内容的最后，`</body>`关闭标签之前。

改变固定定位元素的标记位置不会昌盛不好的影响，但是对相对定位或绝对定位的元素来说，通常无法用改变标记位置的方法解决层叠问题。相对定位依赖于文档流，绝对定位元素依赖于它的定位祖先节点。

### 7.4.2 用z-index控制层叠顺序

拥有较高的z-index的元素出现在拥有较低z-index的元素前面。

陷阱：

- z-index只在定位元素上生效，不能用它控制静态元素。
- 给一个定位元素加上z-index可以创建层叠上下文。

### 7.4.3 理解层叠上下文

一个层叠上下文包含一个元素或者由浏览器一起绘制的一组元素。

层叠上下文负责决定哪些元素出现在另一些元素前面，而BFC负责处理文档流，以及元素是否会重叠。

实际上将层叠上下文里面的所有元素一起绘制会造成严重的后果：层叠上下文之外的元素无法叠放在层叠上下文内的两个元素之间。换句话说，如果一个元素叠放在一个层叠上下文前面，那么层叠上下文里没有元素可以被拉到该元素前面。

说明：给一个定位元素加上z-index是创建层叠上下文最主要的方式，但还有别的属性也能创建，比如小于1的opacity属性，还有transform、filter属性。

所有层叠上下文内的元素会按照以下顺序，从后到前叠放：

- 叠放上下文的根
- z-index为负的定位元素（及其子元素）
- 非定位元素
- z-index为auto的定位元素（及其子元素）
- z-index为正的定位元素（及其子元素）

尽量能将独立的定位元素（比如模态框）放到DOM的顶层，结束标签`</body>`之前，这样就没有外部的层叠上下文能束缚它们了。

## 7.5 粘性定位

它是相对定位和固定定位的结合体。

