
## 2.1 引言
将表达式翻译为后缀形式的过程可以充分演示语法分析技术。

词法分析器是的翻译器可以处理由多个字符组成的构造，比如标识符。标识符由多个字符组成，但是在语法分析阶段被当做一个单元进行处理。这样的单元称为词法单元（token）。

## 2.2 语法定义

“上下文无关文法”
文法自然地描述了大多数程序设计语言构造的层次化语法结构。

在一个产生式中，像关键字if和括号这样的词法元素称为终结符号（terminal）。像expr和stmt这样的变量表示终结符号的序列，它们称为非终结符（nonterminal）。

### 2.2.1 文法定义

一个上下文无关文法（context-free grammar）有四个元素组成：
1. 一个终结符号集合，他们有时也称为“词法单元”。终结符号是该文法所定义的语言的基本符号的集合。
2. 一个非终结符号集合，它们有时也称为“语法变量”。每个非终结符号表示一个终结符号传的集合。
3. 一个产生式集合，其中每个产生式包括一个称为产生式头或左部的非终结符号，一个箭头，和一个称为产生式体或右部的由终结符号及非终结符号组成的序列。产生式主要用来表示某个构造的某种书写形式。如果产生式头非终结符号代表一个构造，那么该产生式体就代表了该构造的一种书写方式。
4. 指定一个非终结符号为开始符号。

在描述文法的时候，我们会列出该文法的产生式，并且首先列出开始符号对应的产生式。
为表示方便，以同一个非终结符号为头部的多个产生式的体可以放在一起表示，不同体之间用符号|（读作“或”）分隔。

### 2.2.2 推导
根据文法对到符号串时，我们首先从符号触发，不断地将某个非终结符号替换为该非终结符号的某个产生式的体。可以从开始符号推导得到的所有终结符号串的集合称为该文法定义的语言（language）。

语法分析（parsing）的任务是：接受一个终结符号串作为输入，找出从文法的开始符号推导出这个串的方法。

一般情况下，一个源程序中会包含由多个字符组成的词素，这些词素由词法分析器组成词法单元，而词法单元的第一个分量就是被语法分析器处理的的终结符号。

### 2.2.3 语法分析树
一个文法的语言的另一个定义是指任何能够由某棵语法分析树生成的符号串的集合。

### 2.2.4 二义性

### 2.2.5 运算符的结合性
我们说运算符“+”是左结合（associate）的，因为当一个运算分量左右两侧都有“+”号时，它属于左边的运算符。

### 2.2.6 运算符的优先级
+和*的结合性规则只能作用于同一运算符的多次出现，因此他们无法解决这个二义性。当多种运算符出现时，我们需要给出一个规则来定义运算符之间的相对优先级。

我们可以将因子（factor）理解成不能被任何运算符分开的表达式。“不能分开”的意思是说当我们在任意因子的任意一边放置一个运算符，都不会导致这个因子的任何部分分离出来，成为这个运算符的运算分量。当然，因子本身作为一个整体可以成为该运算符的一个运算分量。如果这个因子是一个由括号括起来的表达式，那么括号将起到保护其不被分开的作用。如果因子就是一个运算分量，那么它当然不能被分开。

通常这个非终结符号的产生式体只能是单个运算分量或括号括起来的表达式。然后，对于每个优先级都有一个非终结符，表示能被该优先级或更高优先级的运算符分开的表达式。通常，这个非终结符的产生式有一些产生体表示了该优先级的运算符的应用；另有一个产生体只包含了代表更高一层优先级的非终结符。

请注意，任何由括号括起来的表达式都是一个因子。

## 2.3 语法制导翻译
语法制导翻译是通过向一个文法的产生式附加一些规则或程序片段而得到的。

两个语法制导翻译相关的概念：
* 属性（attribute）：属性表示与某个程序构造相关的任意的量。属性可以是多种多样的，比如表达式的数据类型、生成的代码中的指令数目或为某个构造生成的代码中第一条执行的位置等等都是属性的例子。
* （语法制导的）翻译方案（translation scheme）：翻译方案是一种将程序片段附加到一个文法的各个产生式上的表示法。当在文法分析过程中使用一个产生式时，相应的程序片段就会执行。这些程序片段的执行效果按照语法分析过程的顺序组合起来，得到的结果就是这次分析/综合过程处理源程序得到的翻译结果。

### 2.3.1 后缀表示
一个表达式E的后缀表示（postfix notation）可以按照下面的方式进行归纳定义：
1. 如果E是一个变量或常量，则E的后缀表示E本身；
2. 如果E是一个形如E1 op E2的表达式，其中op是一个二目运算符，那么E的后缀表示是A1 A2 op，这里A1和A2分别是E1和E2的后缀表示。
3. 如果E是一个形如（E1）的被括号括起来的表达式，则E 的后缀表示就是E1的的后缀表示。





